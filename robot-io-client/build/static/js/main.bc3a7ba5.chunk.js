(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,e){t.exports=function(){var t=[];return{addListener:function(e){t.push(e)},invoke:function(e){t.forEach(function(t){return t(e)})}}}},35:function(t,e,n){t.exports=n(74)},40:function(t,e,n){},42:function(t,e,n){},69:function(t,e){},74:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(33),r=n.n(i),c=(n(40),n(4)),d=n(5),s=n(7),u=n(6),l=n(8),f=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={now:Date.now()},n}return Object(l.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval(function(){t.tick()},0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({now:Date.now()})}},{key:"render",value:function(){return o.a.createElement("h1",null,"Robot IO")}}]),e}(a.Component),m={Download:function(t){var e=void 0===t.name?"data":t.name,n=JSON.stringify(t),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(n)),a.setAttribute("download",e+".json"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},UploadAsync:function(){return new Promise(function(t,e){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","application/json"),n.addEventListener("change",function(e){var n=e.target,a=new FileReader;a.onload=function(){var e=a.result,n=JSON.parse(e);t(n)},a.readAsText(n.files[0])}),document.body.appendChild(n),n.click(),document.body.removeChild(n)})}};var v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).handleTest=function(t){!1===n.state.isTesting?(n.setState({testText:"End Data Test",isTesting:!0}),window.systems.dataInputTest.begin()):(n.setState({testText:"Begin Data Test",isTesting:!1}),window.systems.dataInputTest.end())},n.handleLoadRealtime=function(t){console.log("loading data realtime");var e=function(){n.setState({realtimeText:"Begin Realtime Load",isRealtime:!1})};!1===n.state.isRealtime?(n.setState({realtimeText:"End Realtime Load",isRealtime:!0}),m.UploadAsync().then(function(t){window.systems.dataStore.setDataRealtime(t,e)})):(e(),window.systems.dataStore.stopDataRealtime())},n.state={testText:"Begin Data Test",isTesting:!1,realtimeText:"Begin Realtime Load",isRealtime:!1},n}return Object(l.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleReset",value:function(){console.log("resetting data.."),window.systems.dataStore.resetData()}},{key:"handleLoad",value:function(){console.log("loading data"),m.UploadAsync().then(function(t){window.systems.dataStore.setData(t)})}},{key:"handleSave",value:function(){console.log("saving data");var t=window.systems.dataStore.getData();m.Download(t)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"File"),o.a.createElement("button",{onClick:this.handleReset},"Reset"),o.a.createElement("button",{onClick:this.handleSave},"Save"),o.a.createElement("button",{onClick:this.handleLoad},"Load"),o.a.createElement("button",{onClick:this.handleLoadRealtime},this.state.realtimeText),o.a.createElement("button",{onClick:this.handleTest},this.state.testText))}}]),e}(a.Component),h=(n(42),function(t){function e(){return Object(c.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(f,{isBuddy:"yeababy"}),o.a.createElement(v,null))}}]),e}(a.Component)),p=n(1),y=n.n(p),g=n(34),D=n.n(g),b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={socket:void 0,onData:y()(),sendData:function(t){e.socket.emit("data",t)}};try{console.log("connecting to socket server..."),e.socket=D()(),e.socket.on("connect",function(t){console.log("socket connected!")}),e.socket.on("data",function(t){e.onData.invoke(t)})}catch(n){return console.log(n),e}t&&e.onData.addListener(function(t){console.log("data received.."),console.dir(t)});return e};var w=function(){var t,e=[],n=y()(),a=y()();function o(t){e.push(t),n.invoke(t)}function i(){r()}function r(){e.length=0,a.invoke()}function c(){clearInterval(t)}return{addData:o,onData:n,onReset:a,setData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(),a.invoke(),t.forEach(function(t){return o(t)})},deleteData:r,resetData:i,setDataRealtime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;i();var a=Date.now(),r=0;t=setInterval(function(t){for(var i=(Date.now()-a)/1e3;r<e.length&&(void 0===e[r].timeStamp||e[r].timeStamp<i);)o(e[r]),r++;r>=e.length&&(c(),n())},10)},stopDataRealtime:c,getData:function(){return e}}};var k=function(){var t,e=y()(),n=y()(),a={begin:function(){window.systems.dataStore.resetData();var e={init:[{type:"chart",name:"Accelerometer",id:0},{type:"trace",name:"x",id:1,chartId:0},{type:"trace",name:"y",id:2,chartId:0},{type:"trace",name:"z",id:3,chartId:0},{type:"chart",name:"Gyroscope",id:1},{type:"trace",name:"x",id:4,chartId:1},{type:"trace",name:"y",id:5,chartId:1},{type:"trace",name:"z",id:6,chartId:1}]};a.onData.invoke(e);var n=0,o=0,i=0,r=0,c=0,d=Date.now();t=setInterval(function(){n+=Math.random()-.499999,o+=Math.random()-.499999,i+=Math.random()-.499999,r+=Math.random()-.499999,c+=Math.random()-.499999,Math.random()-.499999;var t={timeStamp:(Date.now()-d)/1e3,data:[{id:1,value:n},{id:2,value:o},{id:3,value:i},{id:4,value:i},{id:5,value:r},{id:6,value:c}]};a.onData.invoke(t)},100)},end:function(){clearInterval(t),n.invoke()},onData:e,onReset:n};return a};var x=n(14),T=n.n(x),E=n(72);function I(t){var e=T()({layout:{title:t.name,showlegend:!0,xaxis:{title:"time (s)"},yaxis:{title:"units"}},traces:[]},t),n=function(t){var e=document.createElement("div");return document.getElementById("plot-root").appendChild(e),E.newPlot(e,[],t),e}(e.layout);e.el=n,e.addTrace=function(t){e.traces.push(t),E.addTraces(n,[t.settings])},e.updateTraces=function(t){var a={x:e.traces.map(function(t){return t.dataBuffer.map(function(t){return t.timeStamp})}),y:e.traces.map(function(t){return t.dataBuffer.map(function(t){return t.value})}),indicies:e.traces.map(function(t,e){return e})};!function(t,e){E.extendTraces(t,{x:e.x,y:e.y},e.indicies);var n=t.data[0].x.length-1;if(n>100){var a=t.data[0].x[n-100],o=t.data[0].x[n],i={};Object.assign(i,t.layout),Object.assign(i.xaxis,{autorange:!1,range:[a,o]}),E.relayout(t,i)}}(n,a),e.traces.forEach(function(t){return t.clearDataBuffer()})};var a=setInterval(e.updateTraces,100);return e.destroy=function(t){E.purge(n),clearInterval(a)},e}function S(t,e){var n=e.el.data.length,a=T()(function(t,e){var n={settings:{name:void 0===t.name?"data ".concat(e):t.name,type:"scattergl",mode:"lines",x:[],y:[],line:{width:3}},dataBuffer:[]};"x"!==t.name&&"r"!==t.name&&"red"!==t.name||(n.settings.line.color="rgb(255, 0, 0)");"y"!==t.name&&"g"!==t.name&&"green"!==t.name||(n.settings.line.color="rgb(0, 255, 0)");"z"!==t.name&&"b"!==t.name&&"blue"!==t.name||(n.settings.line.color="rgb(0, 0, 255)");return n}(t),t);return a.chart=e,a.index=n,a.appendDataBuffer=function(t,e){a.dataBuffer.push({value:t,timeStamp:e})},a.clearDataBuffer=function(t){a.dataBuffer.length=0},e.addTrace(a),a}var R=function(){var t=[],e=[];return{charts:t,addData:function(n){(function(n){if(void 0===n.init)return;window.systems.dataStore.resetData();var a=n.init.filter(function(t){return"chart"===t.type});t=a.map(function(t){return I(t)}),e=n.init.filter(function(t){return"trace"===t.type}).map(function(e){var n=t.find(function(t){return t.id===e.chartId});return S(e,n)})})(n),function(t){if(void 0===t.data)return;t.data.forEach(function(n){var a=e.find(function(t){return t.id===n.id});void 0===a?console.log("trace not found matching ".concat(n.name)):a.appendDataBuffer(n.value,t.timeStamp)})}(n)},resetData:function(){t.forEach(function(t){return t.destroy()}),t.length=0}}};(function(){var t=w(),e=b(),n=R();t.onData.addListener(n.addData),t.onReset.addListener(n.resetData),e.onData.addListener(t.addData);var a=k();t.onReset.addListener(a.end),a.onData.addListener(t.addData);var o={dataEntityManager:n,dataInputTest:a,socketClient:e,dataStore:t};window.systems=o})(),r.a.render(o.a.createElement(h,null),document.getElementById("root"))}},[[35,2,1]]]);
//# sourceMappingURL=main.bc3a7ba5.chunk.js.map