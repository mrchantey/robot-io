(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,e){t.exports=function(){var t=[];return{addListener:function(e){t.push(e)},invoke:function(e){t.forEach(function(t){return t(e)})}}}},37:function(t,e,n){t.exports=n(78)},42:function(t,e,n){},44:function(t,e,n){},71:function(t,e){},78:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"shortName",function(){return N}),n.d(a,"name",function(){return U}),n.d(a,"create",function(){return M});var o={};n.r(o),n.d(o,"name",function(){return z}),n.d(o,"shortName",function(){return J}),n.d(o,"create",function(){return P});var r=n(0),i=n.n(r),c=n(34),u=n.n(c),s=(n(42),n(4)),d=n(5),l=n(7),f=n(6),m=n(8),v=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(f.a)(e).call(this,t))).state={now:Date.now()},n}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval(function(){t.tick()},0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({now:Date.now()})}},{key:"render",value:function(){return i.a.createElement("h1",null,"Robot IO")}}]),e}(r.Component),h={Download:function(t){var e=void 0===t.name?"data":t.name,n=JSON.stringify(t),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(n)),a.setAttribute("download",e+".json"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},UploadAsync:function(){return new Promise(function(t,e){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","application/json"),n.addEventListener("change",function(e){var n=e.target,a=new FileReader;a.onload=function(){var e=a.result,n=JSON.parse(e);t(n)},a.readAsText(n.files[0])}),document.body.appendChild(n),n.click(),document.body.removeChild(n)})}};var p=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(f.a)(e).call(this,t))).handleDataTest=function(t){!1===n.state.isTesting?(n.setState({testText:"End Data Test",isTesting:!0}),window.systems.dataInputTest.begin()):(n.setState({testText:"Begin Data Test",isTesting:!1}),window.systems.dataInputTest.end())},n.handleLoadDataRealtime=function(t){console.log("loading data realtime");var e=function(){n.setState({realtimeText:"Begin Realtime Load",isRealtime:!1})};!1===n.state.isRealtime?(n.setState({realtimeText:"End Realtime Load",isRealtime:!0}),h.UploadAsync().then(function(t){window.systems.dataStore.setDataRealtime(t,e)})):(e(),window.systems.dataStore.stopDataRealtime())},n.state={testText:"Begin Data Test",isTesting:!1,realtimeText:"Begin Realtime Load",isRealtime:!1},n}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleLoadData",value:function(){console.log("loading data"),h.UploadAsync().then(function(t){window.systems.dataStore.setData(t)})}},{key:"handleSaveData",value:function(){console.log("saving data");var t=window.systems.dataStore.getData();h.Download(t)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"File"),i.a.createElement("button",{onClick:this.handleSaveData},"Save"),i.a.createElement("button",{onClick:this.handleLoadData},"Load"),i.a.createElement("button",{onClick:this.handleLoadDataRealtime},this.state.realtimeText),i.a.createElement("button",{onClick:this.handleDataTest},this.state.testText))}}]),e}(r.Component),D=(n(44),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(v,{isBuddy:"yeababy"}),i.a.createElement(p,null))}}]),e}(r.Component)),y=n(1),g=n.n(y),b=n(35),w=n.n(b),k=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={socket:void 0,onData:g()(),sendData:function(t){e.socket.emit("data",t)}};try{console.log("connecting to socket server..."),e.socket=w()(),e.socket.on("connect",function(t){console.log("socket connected!")}),e.socket.on("data",function(t){e.onData.invoke(t)})}catch(n){return console.log(n),e}t&&e.onData.addListener(function(t){console.log("data received.."),console.dir(t)});return e};var x=function(){var t,e=[],n=g()(),a=g()();function o(t){e.push(t),n.invoke(t)}function r(){e.length=0,a.invoke()}function i(){clearInterval(t)}return{addData:o,onData:n,onReset:a,setData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(),a.invoke(),t.forEach(function(t){return o(t)})},deleteData:r,setDataRealtime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;r(),a.invoke();var c=Date.now(),u=0;t=setInterval(function(t){for(var a=Date.now()-c;u<e.length&&e[u].timeStamp<a;)o(e[u]),u++;u>=e.length&&(i(),n())},10)},stopDataRealtime:i,getData:function(){return e}}};var E=function(){var t,e={begin:function(){e.onReset.invoke();var a=Date.now(),o=0,r=0,i=0,c=0,u=0,s=0;t=setInterval(function(t){var d=Date.now();o+=n(),r+=n(),i+=n(),c+=n(),u+=n(),s+=n();var l={mpu:{acc:{x:o,y:r,z:i},gyro:{x:c,y:u,z:s},temp:25},timeStamp:d-a};e.onData.invoke(l)},10)},end:function(){clearInterval(t)},onData:g()(),onReset:g()()};function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return Math.random()*t-t/2}return e};var T=n(20),O=n.n(T),j=n(36),R=n(76),S=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,o=function(t){var e=document.createElement("div");return document.getElementById("plot-root").appendChild(e),R.newPlot(e,[],t.layout),e}(t),r={x:e.map(function(t){return[]}),y:e.map(function(t){return[]}),indicies:e.map(function(t,e){return e})};function i(){!function(t,e){R.extendTraces(t,{x:e.x,y:e.y},e.indicies);var n=t.data[0].x.length-1;if(n>100){var a=t.data[0].x[n-100],o=t.data[0].x[n],r={};Object.assign(r,t.layout),Object.assign(r.xaxis,{autorange:!1,range:[a,o]}),R.relayout(t,r)}}(o,r),c()}function c(){r.x.forEach(function(t){return t.length=0}),r.y.forEach(function(t){return t.length=0})}var u,s=[];function d(){(function(t,e){return L.apply(this,arguments)})(o,e).then(function(t){s=t,console.log("traces created"),n&&void 0===u&&(u=setInterval(i,a))}).catch(console.error)}return d(),{groupEl:o,traces:s,resetTraces:function(){c();var t=Object.keys(s).map(function(t,e){return e});R.deleteTraces(o,t),R.relayout(o,{xaxis:{autorange:!0}}),d()},appendTraceDataBuffers:function(t){t.x.forEach(function(t,e){return r.x[e].push(t)}),t.y.forEach(function(t,e){return r.y[e].push(t)})},update:i}};function L(){return(L=Object(j.a)(O.a.mark(function t(e,n){var a,o;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.map(function(t){return I(e,t)}),t.next=3,R.addTraces(e,a);case 3:return o=e.data.reduce(function(t,n){return n.groupIndex=e.data.indexOf(n),t[n.name]=n,t},{}),t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function I(t,e){var n={name:"data ".concat(t.data.length),type:"scattergl",mode:"lines",x:[],y:[],line:{width:3}};return Object.assign(n,e),n}var C=n(14),A=n.n(C),B=0;var N="vec3",U="Vector 3";function M(t){var e=A()({name:U,shortName:N,groupData:{layout:{title:U,showlegend:!0,xaxis:{title:"time (s)"},yaxis:{title:"units"}}},addData:function(t,e){var a={x:[e,e,e],y:[t.x,t.y,t.z]};n.appendTraceDataBuffers(a)},resetData:function(){n.resetTraces()},traceDatas:[{name:"x",line:{color:"rgb(255,0,0)"}},{name:"y",line:{color:"rgb(0,255,0)"}},{name:"z",line:{color:"rgb(0,0,255)"}}]},t);e.groupData.layout.title=e.name;var n=S(e.groupData,e.traceDatas);return e.chart=n,function(t){var e=B++,n=A()({uuid:e,name:"entity "+e,children:[],addChild:function(t){n.children.push(t)}},t);return n}(e)}var z="MPU 6050",J="mpu";function P(){var t=M({name:"Accelerometer"}),e=M({name:"Gyroscope"});return{name:z,shortName:J,accelerometer:t,gyroscope:e,addData:function(n,a){t.addData(n.acc,a),e.addData(n.gyro,a)},resetData:function(){t.resetData(),e.resetData()}}}var F=[o,a];var W=function(){var t=[];return{entities:t,addData:function(e){if(void 0===e.timeStamp)return void console.warn("no timestamp found");Object.keys(e).filter(function(t){return"timeStamp"!==t}).forEach(function(n){var a=t.find(function(t){return t.shortName===n});void 0===a&&(a=function(t,e){var n=F.find(function(e){return e.shortName===t});if(void 0!==n)return n.create(e);console.warn("unknown data entity type: ".concat(t))}(n,e[n]),t.push(a)),a.addData(e[n],e.timeStamp)})},resetData:function(){t.forEach(function(t){return t.resetData()})}}};!function(){var t=x(),e=k(),n=W();t.onData.addListener(n.addData),t.onReset.addListener(n.resetData),e.onData.addListener(t.addData),e.onData.addListener(n.addData);var a=E();a.onData.addListener(t.addData),a.onData.addListener(n.addData),a.onReset.addListener(t.deleteData);var o={dataEntityManager:n,dataInputTest:a,socketClient:e,dataStore:t};window.systems=o}();u.a.render(i.a.createElement(D,null),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.4e6729ea.chunk.js.map